{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\n\nexport const createGalleryCard = (imgInfo) => {\n    return `\n    <li class=\"gallery-card\">\n        <a\n          class=\"gallery-link\"\n          href=\"${imgInfo.largeImageURL}\"\n        >\n          <img\n            class=\"gallery-img\"\n            src=\"${imgInfo.webformatURL}\"\n            alt=\"${imgInfo.tags}\"\n            width=360\n  //        onclick=\"return false\"\n            data-source=\"${imgInfo.largeImageURL}\"\n          />\n          <ul class=\"description\">\n            <li>\n              <p>Likes</p>\n              <p class=\"description-value\">${imgInfo.likes}</p>\n            </li>\n            <li>\n              <p>Views</p>\n              <p class=\"description-value\">${imgInfo.views}</p>\n            </li>\n            <li>\n              <p>Comments</p>\n              <p class=\"description-value\">${imgInfo.comments}</p>\n            </li>\n            <li>\n              <p>Downloads</p>\n              <p class=\"description-value\">${imgInfo.downloads}</p>\n            </li>\n          </ul>\n        </a>\n      </li>\n    `;\n};\n\nexport function showMessage(message) {\n    iziToast.show({\n      message: message,\n    });\n  }\n  \n  export function showLoader() {\n    const loader = document.querySelector('.js-loader');\n    loader.classList.remove('is-hidden');\n  }\n  \n  export function hideLoader() {\n    const loader = document.querySelector('.js-loader');\n    loader.classList.add('is-hidden');\n  }\n\n","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedQuery, page = 1) => {\n        // const urlParams = new URLSearchParams({\n        //     key: '46295007-756af9891ee3ef29b100a63be',\n        //     q: searchedQuery,\n        //     image_type: 'photo',\n        //     orientation: 'horizontal',\n        //     safesearch: true,\n        // });\n    \n        const axiosOptions = {\n            params: {\n            key: '46295007-756af9891ee3ef29b100a63be',\n            q: searchedQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n            },\n        };\n     return axios.get(``, axiosOptions); /*axios.defaults.baseURL - automatically write to ``*/\n     \n        //     if (!response.ok) {\n        //         throw new Error(response.status);\n        //     }\n\n        //  return response.json();\n\n        \n};\n","//Описаний у документації\nimport iziToast from \"izitoast\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createGalleryCard,\n        showMessage,\n        showLoader,\n        hideLoader,\n } from \"./js/render-functions\";\n\nimport { fetchPhotos } from \"./js/pixabay-api\";\n\n\nconst searchForm = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nlet searchedValue = '';\nlet totalHits = 0;\n\nlet lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\niziToast.settings({\n        messageColor: 'white',\n        position: \"bottomRight\",\n        backgroundColor: '#ef4040',\n      });\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedValue = searchForm.elements.user_search.value.trim();// from attribute 'name' in input read the value of user\n   \n    currentPage = 1;\n\n    if (searchedValue === '') {\n        showMessage('Please enter a search query.');\n        return;\n      } \n\n    showLoader();\n\n    let response = await fetchPhotos(searchedValue, currentPage);\n   \n    if (response.data.hits.length === 0) {\n              showMessage ('Sorry, there are no images matching your search query. Please try again!',\n              );\n              \n              galleryEl.innerHTML = ''; //clear gallery if query is incorrect\n              searchForm.reset(); // clear input\n              loadMoreBtn.classList.add('is-hidden');\n              return;\n      }\n           \n            \n      const galleryCards = response.data.hits.map(imgDetails => createGalleryCard(imgDetails)).join('');\n      galleryEl.innerHTML = galleryCards;\n\n      loadMoreBtn.classList.remove('is-hidden');\n\n      lightbox.refresh();\n  }\n  catch (err) {if (err.message === '404') {\n                    showMessage('Your request was not found');\n            }\n            }\n  finally {\n                    hideLoader();\n                    searchForm.reset();\n                  };\n};\n\nconst onLoadMoreBtn = async (event) => {\n  try {\n    currentPage++;\n    \n    loadMoreBtn.classList.add('is-hidden');\n    showLoader();\n\n    const response = await fetchPhotos(searchedValue, currentPage);\n    \n\n    const galleryCards = response.data.hits.map(imgDetails => createGalleryCard(imgDetails)).join('');\n      galleryEl.insertAdjacentHTML('beforeend', galleryCards);\n\n      totalHits = response.data.totalHits;\n      createGalleryCard(response.data.hits);\n      lightbox.refresh();\n      \n    const galleryItem = document\n      .querySelector('.gallery-card')\n      .getBoundingClientRect();\n\n    const cardSize = galleryItem.height;\n    window.scrollBy({\n      top: cardSize * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n      if (galleryEl.children.length >= totalHits) {\n        loadMoreBtn.classList.add('is-hidden');\n        showMessage(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n      loadMoreBtn.classList.remove('is-hidden');\n      }\n\n  }\n  catch (err) {\n    if (err.message === '404') {\n                    showMessage('Your request was not found');\n            }\n            }\n  finally {\n    hideLoader();\n    searchForm.reset();\n  };\n}\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);"],"names":["createGalleryCard","imgInfo","showMessage","message","iziToast","showLoader","hideLoader","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchForm","galleryEl","loadMoreBtn","currentPage","searchedValue","totalHits","lightbox","SimpleLightbox","onSearchFormSubmit","event","response","galleryCards","imgDetails","err","onLoadMoreBtn","cardSize"],"mappings":"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"}